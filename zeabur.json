{
  "$schema": "https://zeabur.com/zeabur-config-schema.json",
  "build": {
    "node": "18"
  },
  "services": {
    "frontend": {
      "build": {
        "cmd": ["npm", "run", "build"],
        "workdir": "."
      },
      "output": ["dist"],
      "deploy": {
        "command": ["npm", "run", "dev"],
        "targetPort": 5173,
        "healthCheck": {
          "path": "/",
          "initialDelaySeconds": 10,
          "periodSeconds": 5
        }
      },
      "env": {
        "VITE_API_URL": {
          "dynamic": true,
          "description": "API 后端地址"
        }
      }
    },
    "api": {
      "build": {
        "cmd": ["pip", "install", "-r", "requirements.txt"],
        "workdir": "."
      },
      "source": "api",
      "deploy": {
        "command": ["uvicorn", "index:app", "--host", "0.0.0.0", "--port", "8000"],
        "targetPort": 8000,
        "healthCheck": {
          "path": "/api/health",
          "initialDelaySeconds": 15,
          "periodSeconds": 10
        }
      },
      "env": {
        "PYTHONPATH": ".",
        "DEEPSEEK_API_KEY": {
          "dynamic": true,
          "description": "DeepSeek API Key"
        }
      }
    }
  }
}
